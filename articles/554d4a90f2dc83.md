---
title: "Gemini Fullstack Langgraph を試したけどフロントエンドで日本語の調子が悪いので API を叩いた"
emoji: "🤖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["deepresearch", "langgraph", "gemini", "oss"]
published: true
---

## 環境

- macOS 15.3.1
- docker 28.0.4
- 2025-06-05

## フロントエンドが調子悪い？

- 日本語入力がまともにできない。ペーストで対処は可能。
- 検索はされていそうだけど、エラーが出て結果が表示されない。

## API を叩いてみた

### API 仕様の確認

- ドキュメント
    - `open http://localhost:8123/docs`
- OpenAPI Specification
    - `curl http://localhost:8123/openapi.json`

### 実行

スレッドの作成

```bash
THREAD_ID=$(curl -s http://localhost:8123/threads \
  -H "Content-Type: application/json" \
  -d '{}' \
  | jq -r '.thread_id')
```

プロンプト入力

```bash
USER_PROMPT="最新の Claude Desktop の機能について調べてください"
```

モデル選択

```bash
REASONING_MODEL="gemini-2.5-flash-preview-04-17"
# gemini-2.0-flash
# gemini-2.5-flash-preview-04-17
# gemini-2.5-pro-preview-05-06
```

ストリーム可否

```bash
STREAM="/stream"  # "" or "/stream"
```

検索実行

```bash
curl -N -X POST http://localhost:8123/threads/${THREAD_ID}/runs${STREAM} \
  -H "Content-Type: application/json" \
  -d "{
    \"assistant_id\": \"agent\",
    \"input\": {
      \"messages\": [
        {
          \"role\": \"user\",
          \"content\": \"${USER_PROMPT}\"
        }
      ],
      \"reasoning_model\": \"${REASONING_MODEL}\"
    }
  }"
```

![設定](/images/554d4a90f2dc83/deepresearch.gif)

結果確認

```bash
curl -s http://localhost:8123/threads/$THREAD_ID/state | jq
```

## 所感

検索結果をちゃんと見ていないけど、なんとなく良さそうな？
ワークフローなどで利用してみたい。
gemma でも動くとか。
以上。
